(this.webpackJsonpel_cateo=this.webpackJsonpel_cateo||[]).push([[49],{843:function(e,a,t){"use strict";t.r(a);var s=t(124),c=t(40),n=t(5),r=t(35),l=t(1),i=t.n(l),d=t(2),o=t(17),j=t(97),b=t(125),m=t.n(b),u=t(53),h=t(3);a.default=function(){var e=Object(o.g)(),a=Object(o.i)(),t=Object(d.useState)({name:"",owner_id:"",address:"",area:"",status:"",files:""}),l=Object(r.a)(t,2),b=l[0],O=l[1],p=Object(d.useState)({}),f=Object(r.a)(p,2),x=f[0],v=f[1],N=Object(d.useState)(!1),g=Object(r.a)(N,2),w=(g[0],g[1]),y=Object(d.useState)(null),k=Object(r.a)(y,2),S=(k[0],k[1]),C=Object(d.useState)(null),E=Object(r.a)(C,2),F=E[0],A=E[1],D=function(e){var a=e.target,t=a.name,s=a.value;O(Object(n.a)(Object(n.a)({},b),{},Object(c.a)({},t,s)))},I=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat("https://api.elcateo.com","/farm/").concat(a.id,"/read"),{headers:{authorization:localStorage.getItem("authToken")}}).then((function(e){S(e.data.data.files[0]),O(e.data.data)})).catch((function(e){console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){console.log(x),Object.keys(x).length}),[x]);var T=function(){var t=Object(s.a)(i.a.mark((function t(s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),v(q(b)),(c=new FormData).append("name",b.name),c.append("assignedOwner",b.assignedOwner),c.append("address",b.address),c.append("area",b.area),c.append("status",b.status),c.append("files",F),w(!0),t.next=12,m.a.put("".concat("https://api.elcateo.com","/farm/").concat(a.id,"/update"),c,{headers:{authorization:localStorage.getItem("authToken")}}).then((function(a){alert(a.data.message),e.push("/farms")})).catch((function(e){alert(e.message)}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(e){var a={};return e.name?/^[a-zA-Z]{3,}$/i.test(e.name)||(a.name="This is not a valid name!"):a.name="Name is required!",e.address||(a.address="Address is required!"),e.area?/^[0-9\b]+$/i.test(e.area)||(a.area="This is not a valid area format!"):a.area="Area is required!",a};return Object(d.useEffect)((function(){I()}),[]),Object(d.useEffect)((function(){console.log(x),Object.keys(x).length}),[x]),Object(h.jsx)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",children:Object(h.jsxs)("div",{className:"col-12 p-0 content-wrapper",children:[Object(h.jsx)("div",{className:"content-header",children:Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsxs)("div",{className:"row mb-2",children:[Object(h.jsx)("div",{className:"col-sm-6",children:Object(h.jsx)("h1",{className:"m-0",children:"Edit Farm Data"})}),Object(h.jsx)("div",{className:"col-sm-6",children:Object(h.jsx)(j.a,{breadCrumbs:[{name:"Dashboard",link:"/dashboard"},{name:"Farms",link:"/farms"},{name:"Edit",link:""}]})})]})})}),Object(h.jsx)("section",{className:"content",children:Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header border-transparent",children:Object(h.jsx)("div",{className:"row",children:"\xa0"})}),Object(h.jsxs)("form",{onSubmit:T,encType:"multipart/form-data",children:[Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("div",{className:"row mb-3",children:[Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsxs)("label",{htmlFor:"floatingInput",children:["Name ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)("input",{name:"name",type:"text",className:"form-control",id:"name",placeholder:"Enter name",value:b.name,onChange:D}),Object(h.jsx)("p",{style:{color:"red"},children:x.name})]}),Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsxs)("label",{htmlFor:"floatingInput",children:["Area "," ","(Square Hector) ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{name:"name",type:"number",className:"form-control",id:"name",placeholder:"Enter area",value:b.area,onChange:D}),Object(h.jsx)("p",{style:{color:"red"},children:x.area})]}),Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsxs)("label",{htmlFor:"floatingInput",children:["Address ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)("textarea",{name:"location",rows:5,type:"text",className:"form-control",id:"location",placeholder:"Enter address",value:b.address,onChange:D}),Object(h.jsx)("p",{style:{color:"red"},children:x.address})]}),Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsxs)("label",{children:["Status ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("select",{id:"input4",className:"form-select",name:"status",value:b.status,onChange:D,children:Object.keys(u.f).map((function(e,a){return Object(h.jsx)("option",{value:e,children:u.f[e]},a)}))})]}),Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsx)("label",{children:"Owner Name"}),Object(h.jsx)("br",{}),Object(h.jsx)("select",{id:"input4",className:"form-select",name:"status",disabled:!0,children:Object(h.jsx)("option",{children:"Coming soon"})})]}),Object(h.jsx)("div",{className:"col-md-6",children:Object(h.jsx)("div",{style:{display:"flex",margin:10,width:400,flexWrap:"wrap"},children:Object(h.jsx)("input",{accept:"image/*",id:"icon-button-file",type:"file",onChange:function(e){console.log("event : ",e),e.target.files&&e.target.files[0]&&(S(URL.createObjectURL(e.target.files[0])),A(e.target.files[0]))}})})}),Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsx)("br",{}),Object(h.jsx)("img",{src:u.b.farms+"/"+b.files,width:300,height:150})]})]})}),Object(h.jsx)("div",{className:"card-footer clearfix",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-sm btn-app float-end",children:"Update"})})]})]})})})})})]})})}},97:function(e,a,t){"use strict";t(2),t(98);var s=t(28),c=t(3);function n(e){var a=e.breadCrumbs;return Object(c.jsx)("nav",{className:"float-sm-end","aria-label":"breadcrumb",children:Object(c.jsx)("ol",{className:"breadcrumb",children:a.map((function(e,a){var t=e.link&&""!==e.link;return Object(c.jsx)("li",{className:"breadcrumb-item ".concat(t?"active":""),children:t?Object(c.jsx)(s.b,{to:e.link,children:e.name}):e.name},a)}))})})}n.defaultProps={breadCrumbs:[{name:"Dashboard",link:"/dashboard"}]},a.a=n},98:function(e,a,t){}}]);
//# sourceMappingURL=49.2f55ee50.chunk.js.map